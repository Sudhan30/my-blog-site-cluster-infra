[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/nginx.err.log
stdout_logfile=/var/log/supervisor/nginx.out.log

[program:postgres]
command=/opt/infra/scripts/start-postgres.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/postgres.err.log
stdout_logfile=/var/log/supervisor/postgres.out.log

[program:redis]
command=/opt/infra/scripts/start-redis.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/redis.err.log
stdout_logfile=/var/log/supervisor/redis.out.log

[program:prometheus]
command=/opt/infra/scripts/start-prometheus.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/prometheus.err.log
stdout_logfile=/var/log/supervisor/prometheus.out.log

[program:grafana]
command=/opt/infra/scripts/start-grafana.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/grafana.err.log
stdout_logfile=/var/log/supervisor/grafana.out.log

[program:postgres-exporter]
command=/opt/infra/scripts/start-postgres-exporter.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/postgres-exporter.err.log
stdout_logfile=/var/log/supervisor/postgres-exporter.out.log

[program:blackbox-exporter]
command=/opt/infra/scripts/start-blackbox-exporter.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/blackbox-exporter.err.log
stdout_logfile=/var/log/supervisor/blackbox-exporter.out.log

[program:health-check]
command=/opt/infra/scripts/health-check.sh
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/health-check.err.log
stdout_logfile=/var/log/supervisor/health-check.out.log
